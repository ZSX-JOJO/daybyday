## doT.js  瞎鸡巴记录

数据 模版 插入  嗯哼？嗯！

```javascript
var tpl = document.getElementById("doT-Template").innerHTML;
var tplData = doT.template(tpl);
document.getElementById("doT-Html").innerHTML = tplData(ret.data);
//以上 没毛病 有点蠢 以下 很耐操 狠舒服
document.getElementById("doT-Html").innerHTML = doT.template(document.getElementById("doT-Template").innerHTML)(ret.data); 
------------------------------------------------------------------------------------------
document.querySelector('#doT-Html').innerHTML = doT.template(document.querySelector('#doT-Template').innerHTML)(); //其他写法 多用于前端添加数据发送到后台 并且还脑残的想使用doT 都不获取数据 还脑残的用啥子doT ??? 
{{=SITE_URL}}/{{=it[i].参数}}
```

经常用 勿相忘 不shit

```javascript
默认的定界符列表：
---------------------------------------------------------------------------------------------------
{{ }}	用于求值(evaluation)
{{= }}	用于插值(interpolation)
{{! }}	用于编码求值
{{# }}	用于编译时求值/引入和局部模板
{{## #}}	用于编译时定义
{{? }}	条件语句
{{~ }}	数组迭代
---------------------------------------------------------------------------------------------------
1 直接赋值：
{{=it.参数}} //it就是指tplData(ret)中的ret或ret.data 灵活使用 例如{{=it.data.user_name}}或{{=it.user_name}}
//实例乳下
<div>{{=it.参数 || ''}}</div>  <!--后续内容 防止后台数据null的情况-->
---------------------------------------------------------------------------------------------------
2 条件判断：
2.1 if 判断：
{{? it}}
    {{? it == 1}}
    <div>等于1的div</div>
{{?}}
 --------------------------------------------------------------------------------------------------
2.2 else if 判断：
{{?? it}} 
	<div>...</div> ... <div>...</div>
{{??}}
	//实例如下:
{{?it == 1}}
	<div>等于1的div</div>
{{?? it == 2}}
    <div>等于2的div</div>
{{?}}
 --------------------------------------------------------------------------------------------------
2.3 else 判断
{{?? it}}
 	<div>...</div> ... <div>...</div>
{{??}}
	//实例如下
{{?it == 1}}
	<div>如果 等于1的div</div>
{{?? it == 2}}
    <div>如果 等于2的div</div>
{{?? it == 3}}
	<div>否则 等于3的div</div>
{{?}}
---------------------------------------------------------------------------------------------------
3 循环：
3.1
{{for(var i in it){}} //循环 遍历ret 或者ret.data   遍历对象时为对象属性/方法名，遍历数组时为数组元素下标索引 就是for-in而已 瞎想神马！
	<div>...</div> ... <div>...</div>
{{}}} //看清楚长相！ 记住这张丑脸！ 真的是怪丑！
	//实例如下
{{for(var i in it){}}
    <div>{{=it[i].a)}}</div>
    <div>{{=it[i].b}}</div>
    <div>{{=it[i].c}}</div>
{{}}}
3.2
{{for(var ii in it[i]){}} //两次循环遍历ret中数组
	<div>...</div> ... <div>...</div>
{{}}}
	//实例如下
{{for(var i in it){}}
     <div>{{=it[i].a}}</div>
          {{for(var ii in it[i]){}}
            <div>{{=it[i].b[ii]}}</div>
          {{}}}
      <div>{{=it[i].c}}</div>
{{}}}
---------------------------------------------------------------------------------------------------
4 数组迭代:
{{~ it.list:item:index }}
      <div>{{= index + 1 }}</div>
      <div>{{= item.name }}</div>
      <div>{{= item.email }}</div>
{{~ }}
 //以上 即为实例
 //数据如下
 var data = {
    status: true,
    msg: 'success',
    list: [{
        id: 1,
        name: 'zhangsan',
        email: 'zhangsan@lwhweb.com'
    }, {
        id: 2,
        name: 'lisi',
        email: 'lisi@lwhweb.com'
    }]
};
 //可能遇到的问题乳下
	当方法里参数使用dot获取的时候 记得加''  否则人品差的时候会报错...
 //以下未搞懂。。。 整理ing
5 {{! }}	用于编码求值
6 {{# }}	用于编译时求值/引入和局部模板
7 {{## #}}	用于编译时定义
 
```

## 每日乱纪(记)

```javascript
以下为每日碰到 瞎鸡巴记录的 闲人不给看 ╭(╯^╰)╮

textContent 

value

querySelector() 	//("class") ("#id")

querySelectorAll()

String 对象

JSON.stringify() //JavaScript 对象转换为字符串
JSON.parse() //JSON 字符串转换为对象
H5缓存
以下为socket
socket.on
------------------------------------------------------------------
if(document.querySelector(".aui-bar-tab-item.aui-active")){
            document.querySelector(".aui-bar-tab-item.aui-active").classList.remove("aui-active");
        }
// 当前增加active  函数需要传参 对应位置需要添加Id 从而一一对应
document.getElementById("menu-"+index).classList.add("aui-active");
---------------------------------
document.getElementsByClassName('message')[0].classList.remove("aui-hide");
----------------------------------------
  <dir class="right" tapmode onclick="other_login('wx')">
    <input type="checkbox" class="aui-switch" checked>
  </dir>
-------------------------------------------
 document.getElementById("check1").checked=true
 document.getElementById("check1").checked=false
--------------------------
toFixed()方法
-------------
data-****  //HTML5自定义属性
------------
同一页面 尽量不要写 发送事件与监听
```

## apicloud 页面缓存

```javascript
document.getElementById("header").innerHTML = doT.template(document.getElementById("dot-header").innerHTML)();
var header = $api.byId('header');
$api.fixStatusBar(header);
//karr优化 页面加载白屏的问题 处理win页面加载缓慢问题 but因为存在多语言问题 此解决思路废除
```

```javascript
以下为正解！！！:
问题出处   列表页无缓存以及详情页无缓存 造成打开页面缓慢 并出现短时间白屏问题
问题分析:此处模版引擎使用aui-tpl  dot.js的变种 因为win页面上存在数据 造成页面加载缓慢 so 需要对win页面做缓存 解决办法如下所示
[列表页]:
for(var i =0;i<ret.data.length;i++){//列表页遍历  中间运算符内容根据具体页面的模版内容具体设置
  api.writeFile({
    path: 'fs://orderData/'+ret.data[i].order_id+".json",//根据实际页面自行设置 并保证缓存文件的唯一性
    data: JSON.stringify(ret.data[i])//参数 根据页面要求具体设置 略
  }, function(ret, err) {
  });
}

[详情页  此处为详情页的win]:
//进入详情页 先读取本地缓存 再通过ajax从后台获取
api.readFile({
  path: 'fs://orderData/'+api.pageParam.id+".json",//列表页跳转到详情页 传递参数 自行设置！自行设置！
}, function(ret, err) {
  if(ret.data){
    var r = {};
    r.data = JSON.parse(ret.data);//看清楚 与上边不同 aui-tpl有瑕疵 下面的两行注释为正解 通dot.js
    document.getElementById("doT-Html").innerHTML = auiTpl("#data-tpl",r);
    //ret.data = JSON.parse(ret.data);
    //document.getElementById("doT-Html").innerHTML = auiTpl("#data-tpl",ret)
    setTitle();//多语言 因为翻译出现一对多  so页面的特殊处理 方法略
    var header = $api.byId('header');
    $api.fixStatusBar(header);
    var headerH = $api.offset(header).h;
    var footerH = $api.offset($api.byId("footer")).h;
    var headerH2 = $api.offset($api.byId("header2")).h;
  }
});
//后面为ajax 此处略
```

## socket最简单应用

```
var socket = io('服务器地址:端口');

```

## 下拉刷新  上拉加载

```javascript
//下拉刷新 
api.setCustomRefreshHeaderInfo 或者 搭配 UIPullRefreshFlash模块食用
```

```
//上拉加载
模块  UIListView
```

## 图片懒加载

```
//懒加载
```

