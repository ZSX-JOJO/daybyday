<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <title>dispatchEvent示例用法</title>
</head>
    <body>
        <p>自定义事件的定义和触发</p>
        省份:<select id="province" onchange= "provinceChange()"></select>
        城市:<select id="city"></select>
    </body>
    <script type="text/javascript">
        var provinces = new Array();
        provinces["陕西"] = ["西安","咸阳","宝鸡","延安","汉中"];
        provinces["台湾"] = ["台北","台中","台南"];
        provinces["浙江"] = ["杭州","宁波","绍兴","温州"];
        
        function provinceChange()
        {   
            console.log("onChange is triggered.");
            var prov = document.getElementById("province").value;
            var cityObj = document.getElementById("city");
            cityObj.options.length =0;
            for(var i in provinces[prov])
            {
                cityObj.options.add(new Option(provinces[prov][i],provinces[prov][i]));
            }
        }
        window.onload = function(){
            var provinceObj = document.getElementById("province");
            for(var index in provinces)
            {
                provinceObj.options.add(new Option(index,index));
            }
        
            var event = document.createEvent('HTMLEvents');
            event.initEvent("change", true, true);
            event.eventType = 'message';
            provinceObj.dispatchEvent(event);
        };
    </script>
</html>