<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>Hello APP</title>
    <link rel="stylesheet" type="text/css" href="../../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../../css/common.css" />
    <script type="text/javascript" src="../../script/dot.min.js"></script>
    <style type="text/css">
        .score {
            width: 100%;
            background: #fff;
            padding-top: 1.5rem;
        }
        .score .star-five {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .star {
            width: 1.25rem;
            height: 1.25rem;
            background: url(../../image/index/36.png);
            background-size: 1.25rem;
            float: left;
            margin-left: 0.35rem;
        }
        .star-after {
            background: url(../../image/index/35.png);
            background-size: 1.25rem;
        }
        .info {
            font-family: PingFang-Regular;
            font-size: 0.6rem;
            color: #ff8b24;
            text-align: center;
            width: 100%;
            margin-top: 0.8rem;
        }
        .score-text {
            width: 100%;
            background: #fff;
            padding-top: 1.45rem;
            padding-left: 0.75rem;
        }
        .score-text .score-text-t {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .text-t {
            font-family: PingFang-Regular;
            font-size: 12px;
            color: #999999;
            text-align: center;
            padding-right: 1rem;
        }
        .score-text .score-text-b {
            display: flex;
            padding-left: 0.75rem;
            justify-content: flex-start;
            align-items: center;
        }
        .text-b {
            font-family: PingFang-Regular;
            font-size: 12px;
            color: #999999;
            padding: 0.8rem 0 1.3rem 1.1rem;
        }
        .details {
            background-color: #fff;
            font-size: 0.6rem;
            color: #333333;
            padding: 1.3rem 0;
        }
        .line {
            padding: 0 0.75rem;
            background-color: #fff;
        }
    </style>
</head>
<body>
    <div id="doT-Html"></div>
    <script type="text/x-dot-template" id="doT-Template">
    <div class="aui-content">
        <!-- 5星 + 评价关键词 -->
        <div class="score">
            <div class="star-five">
                <div class="star star-after aui-margin-l-0" tapmode onclick="star('0')"></div>
                <div class="star star-after" tapmode onclick="star('1')"></div>
                <div class="star star-after" tapmode onclick="star('2')"></div>
                <div class="star star-after" tapmode onclick="star('3')"></div>
                <div class="star star-after" tapmode onclick="star('4')"></div>
                <input type="hidden" name="star_num" id="stars">
            </div>
            <div class="info">非常满意, 无可挑剔</div>
        </div>
        <div class="score-text">
            <div class="score-text-t">
                <div class="text-t">"周到服务"</div>
                <div class="text-t">"动作迅速"</div>
                <div class="text-t">"衣着整洁大方"</div>
            </div>
            <div class="score-text-b">
                <div class="text-b">"动作迅速"</div>
                <div class="text-b">"衣着整洁大方"</div>
            </div>
        </div>
        <!-- 具体评价内容 -->
        <div class="line">
            <div class="aui-noborder aui-border-t details">
                {{=it.eva_content || ''}}
            </div>
        </div>
    </div>
    </script>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript">
    // document.querySelector("#doT-Html").innerHTML = doT.template(document.querySelector("#doT-Template").innerHTML)();
    var eva_id;
    apiready = function() {
        api.parseTapmode();
        eva_id = api.pageParam.name;
        detail();
    };

    function star(n) {
        var els = $api.domAll('.star');
        for (var i = 0; i < els.length; i++) {
            $api.removeCls(els[i], 'star-after');
            if (i <= n) {
                $api.addCls(els[i], 'star-after');
            }
        }
        $api.val($api.byId('stars'), parseInt(n) + 1);
        // console.log($api.val($api.byId('stars')))
    }

    function detail(){
        postData = {};
        postData.eva_id = eva_id;
        api.ajax({
            url: BASE_URL + 'App/Mine/evaluationDetail',
            method: 'post',
            data: {
                values:postData
            }
        }, function(ret, err) {
            if (ret) {
                if(ret.code == "1"){
                    document.getElementById("doT-Html").innerHTML = doT.template(document.getElementById("doT-Template").innerHTML)(ret.data);
                }
            }
        });
    }
</script>
</html>
