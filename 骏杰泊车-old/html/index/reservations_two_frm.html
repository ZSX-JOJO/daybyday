<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width" />
<meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
<title>Hello APP</title>
<link rel="stylesheet" type="text/css" href="../../css/aui-flex.css" />
<link rel="stylesheet" type="text/css" href="../../css/aui.css" />
<link rel="stylesheet" type="text/css" href="../../css/common.css" />
<style>
	body {
		background: #f6f8fa;
	}
	.info {
		background: #fff;
		padding: 0 0.75rem;
	}
	.aui-info {
		height: 2.5rem;
	}
	.info .aui-info-item img.arrowRight {
		height: 0.5rem;
		display: block;
	}
	.aui-card-list-footer {
		height: 2.5rem;
		line-height: 2.5rem;
		padding-top: 0;
		padding-bottom: 0;
		background: #fff;
	}
	.aui-card-list-footer img.img-icon-add {
		display: inline-block !important;
		width: auto !important;
		height: 1rem !important;
		vertical-align: middle;
		margin-right: 0.4rem;
	}
	.padding-t-b {
		padding-top: 0.75rem;
		padding-bottom: 0.45rem;
	}
	.footerBtn {
		padding: 0 0.75rem;
		margin: 3rem 0 1rem;
	}
	.footerBtn .aui-bar {
		border-radius: 1.5rem;
		box-shadow: 0 0.2rem 0.2rem rgba(0,0,0,0.15);
	}
	.footerBtn .aui-bar-btn-item {
		border: none;
		background: #3474e9;
		width: 50%;
		color: #fff;
		font-size: 0.75rem;
		line-height: 2.25rem;
	}
	.footerBtn .aui-active {
		background: #083a91;
	}
	.aui-card-list {
		margin-bottom: 0;
	}

	@media all and (max-width:350px){
		.fontHide {
			display: none;
		}
	}
	.item {
		background-color: #FFF;
		height: 2.5rem;
	}
	.numBox img {
		width: 1.1rem;
		height: auto;
	}
	.numBox input {
		width: 2.5rem;
		text-align: center;
	}
</style>
</head>

<body>
<section>
	<div>
		<div class="aui-font-size-12 aui-text-center padding-t-b">预计抵达停车场时间</div>
		<div class="aui-info info text-dark" tapmode onClick="selectDate();">
			<div class="aui-info-item font-size-15"><span class="fontHide">请选择</span>预计抵达停车场时间</div>
			<div class="aui-info-item right-arrow aui-padded-r-15" id="date_time"></div>
		</div>
	</div>
	<div>
		<div class="aui-font-size-12 aui-text-center padding-t-b">乘客人数</div>
		<div class="item aui-flex-col aui-flex-middle aui-flex-center numBox">
			<div class="down" tapmode onClick="down(this);"><img src="../../image/index/50.png"></div>
			<div><input type="tel" value="1" class="numAll"></div>
			<div class="up" tapmode onClick="up(this);"><img src="../../image/index/51.png"></div>
		</div>
	</div>
	<div>
		<div class="aui-font-size-12 aui-text-center padding-t-b">是否有儿童</div>
		<div class="item aui-flex-col aui-flex-middle aui-flex-center numBox">
			<div class="down" tapmode onClick="down(this);"><img src="../../image/index/50.png"></div>
			<div><input type="tel" value="无" class="babyNum"></div>
			<div class="up" tapmode onClick="up(this);"><img src="../../image/index/51.png"></div>
		</div>
	</div>
	<div class="aui-text-center aui-margin-t-10 aui-margin-b-5">
		<p class="text-common aui-font-size-12">我们会根据儿童数量配备儿童座椅</p>
	</div>
	<div>
		<div class="aui-font-size-12 aui-text-center padding-t-b">联系人信息</div>
		<div class="info">
			<div class="aui-info text-dark aui-border-b">
				<div class="aui-info-item font-size-15">联系人姓名</div>
				<div class="aui-info-item">
					<input type="text" class="aui-font-size-12 aui-text-right" placeholder="请填写真实姓名" id="contact-name">
				</div>
			</div>
		</div>
		<div class="info">
			<div class="aui-info text-dark">
				<div class="aui-info-item font-size-15">手机号</div>
				<div class="aui-info-item">
					<input type="tel" class="aui-font-size-12 aui-text-right" placeholder="18888888888" id="contact-mobile">
				</div>
			</div>
		</div>
	</div>
	<div>
		<div class="aui-font-size-12 aui-text-center padding-t-b">车辆信息</div>
		<div class="item aui-flex-col aui-flex-middle aui-flex-center" tapmode onClick="openCar();" id="car-wrap">
			<div style="width: 0.75rem; margin-right: 0.4rem;"><img src="../../image/index/53.png" alt=""></div>
			<div class="font-size-15">添加车辆信息</div>
		</div>
	</div>
	<div class="footerBtn">
		<div class="aui-bar aui-bar-btn aui-bar-btn-round">
			<div class="aui-bar-btn-item" tapmode onClick="charge_win('charge_win');">不确定何时回程</div>
			<div class="aui-bar-btn-item aui-active" tapmode onClick="openReturnAirport();">填写回程信息</div>
		</div>
	</div>
</section>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/dom7.js"></script>
<script type="text/javascript">
	var carId;
	var park_id;
	var pageData;
    apiready = function() {
		api.parseTapmode();
		pageData = api.pageParam;
		park_id = api.pageParam.park_id;
    };
	function down(n){
		var box = $$(n).parents('.numBox');
		var input = box.find('input');
		var num = input.val();
		num = num=='无' ? 0 : num;
		num = parseInt(num)-1;
		if(input.hasClass('babyNum')){
			num = num >0 ? num : '无';
		}else{
			num = num >0 ? num : 1;
		}
		input.val(num);
	}
	function up(n){
		var box = $$(n).parents('.numBox');
		var input = box.find('input');
		var num = input.val();
		num = (!num) ? 0 : num;
		num = (num=='无') ? 0 : num;
		num = parseInt(num)+1;
		input.val(num);
	}
	//日期
	function selectDate(){
		api.openFrame({
			name: 'date_mask',
			url: 'date_mask.html',
			rect: {
				x: 0,
				y: 0,
				w: 'auto',
				h: 'auto'
			},
			pageParam: {
				wname: api.winName,
				fname: api.frameName
			}
		});
	}
	//车辆信息
	function openCar(){
		api.openWin({
			name: 'common_car_win',
			url: '../mine/common_car_win.html',
			pageParam:{
				source:'order',
				wname:api.winName,
				fname:api.frameName
			}
		});
	}
	function changeCarData(carNum,_carId){
		carId = _carId;
		document.getElementById("car-wrap").textContent = carNum;
	}
	//返回数据更改
	function changeData(domId,name){
		$$('#'+ domId).text(name);
	}
	function charge_win(url){
		// 获取乘客人数
		pageData.order_passenger = document.querySelector(".numAll").value;
		pageData.order_child = document.querySelector(".babyNum").value;
		if(pageData.order_child == '无'){
			pageData.order_child = 0;
		}
		pageData.data_pick_time = document.getElementById("date_time").textContent;//抵达停车场时间
		pageData.data_username = document.getElementById("contact-name").value;//联系人姓名
		pageData.data_usermobile = document.getElementById("contact-mobile").value;
		pageData.returnType = 1;//不确定何时回程
		pageData.car_id = carId;
		// 获取其他服务
		api.openWin({
		    name: url,
		    url: url + '.html',
		    pageParam: pageData
		});
	}
	function openReturnAirport(url){
		pageData.order_passenger = document.querySelector(".numAll").value;
		pageData.order_child = document.querySelector(".babyNum").value;
		if(pageData.order_child == '无'){
			pageData.order_child = 0;
		}
		pageData.data_pick_time = document.getElementById("date_time").textContent;//抵达停车场时间
		pageData.data_username = document.getElementById("contact-name").value;//联系人姓名
		pageData.data_usermobile = document.getElementById("contact-mobile").value;
		pageData.returnType = 2;//不确定何时回程
		pageData.car_id = carId;
		api.openWin({
		    name: 'return_airport_win',
		    url: 'return_airport_win.html',
		    pageParam: pageData
		});
	}
</script>
</html>
