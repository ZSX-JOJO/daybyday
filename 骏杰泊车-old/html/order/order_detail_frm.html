<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width"/>
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <title>Hello APP</title>
    <link rel="stylesheet" type="text/css" href="../../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../../css/common.css" />
	<style>
        .order-info img.img-icon {
            display: inline-block !important;
            /*width: 2.1rem !important;*/
        }
        .order-info img.img-arrow {
            margin-top: 1.2rem;
            display: inline-block !important;
            width: 1.05rem !important;
            height: auto !important;
        }
        .aui-card-list-footer {
            height: 2.5rem;
            line-height: 2.5rem;
            padding-top: 0;
            padding-bottom: 0;
        }
        .aui-card-list-footer img.img-icon {
            display: inline-block !important;
            width: auto !important;
            height: 0.8rem !important;
            position: relative;
            top: 2px;
            margin-right: 0.2rem;
        }
        .order-btn img.img-icon {
            display: inline-block !important;
            width: auto !important;
            height: 0.75rem !important;
        }
        .order-btn.aui-grid [class*="aui-col-"] {
            padding: 0.45rem 0;
        }
        .order-btn .aui-grid-label {
            margin-top: 0rem;
        }
        .aui-tab-item.aui-active {
            border-bottom: none;
        }
        .aui-tab-item.aui-active:after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            width: 50%;
            margin-left: -25%;
            border-bottom: 2px solid #083a91;
            border-radius: 1px;
        }
        .aui-list .aui-list-item {
            padding-left: 0;
        }
        .aui-list .aui-list-item-inner {
            min-height: 2.5rem !important;
            padding-right: 0;
        }
        .aui-list .aui-list-item-right{
            max-width: 70%;
        }
        .aui-grid .aui-grid-label.airport-name {
    			font-size: 0.85rem;
    		}
    		@media all and (max-width:350px){
    			.aui-grid .aui-grid-label.airport-name {
    				font-size: 0.75rem;
    			}
    		}
	</style>
</head>
<body class="bg-none">
    <div id="doT-Html"></div>
    <script type="text/x-dot-template" id="doT-Template">
    <section class="aui-content" id="data-tpl">
        <div class="aui-card-list aui-margin-0 bg-none">
            <div class="aui-card-list-content-padded aui-padded-t-5 aui-padded-b-0 aui-grid order-info bg-none">
                <div class="aui-row aui-padded-l-5 aui-padded-r-5">
                    <div class="aui-col-xs-5">
                        <img src="../../image/common/31.png" class="img-icon" style="width: 2.1rem" />
                        <div class="aui-grid-label font-size-15">预约成功</div>
                        <p class="font-size-13">请准时前往航站楼</p>
                    </div>
                    <div class="aui-col-xs-2 arrow-wrap">
                        <img src="../../image/common/32.png" class="img-arrow" />
                    </div>
                    {{? it.order_status==2 }}
                    <div class="aui-col-xs-5">
                        <img src="../../image/order/head.png" class="img-icon aui-img-round" style="width: 2.25rem"/>
                        <div class="aui-grid-label font-size-15 aui-margin-t-5 text-common">待派单...</div>
                        <p class="aui-font-size-12">航班当日指派司机</p>
                    </div>
                    {{??}}
                    <div class="aui-col-xs-5">
                        <img src="{{=it.driver_avatar || '../../image/order/head.png'}}" class="img-icon aui-img-round" style="width: 2.25rem"/>
                        <div class="aui-grid-label font-size-15 aui-margin-t-5">{{=it.driver_name||''}}</div>
                        <p class="aui-font-size-12">接单司机</p>
                    </div>
                    {{?}}
                </div>
            </div>
            <div class="aui-card-list-footer aui-border-t bg-white" tapmode onclick="openWin('order_return_win')">
                <div></div>
                <div>
                    <img src="../../image/common/33.png" class="img-icon" />
                    <span class="text-dark">回程信息</span>
                </div>
                <div></div>
            </div>
            <div class="aui-card-list-content aui-grid order-btn aui-border-t">
                <div class="aui-row">
                    {{? it.order_status==2 }}
                    <div class="aui-col-xs-3 aui-border-r">
                        <img src="../../image/common/34.png" class="img-icon" />
                        <div class="aui-grid-label aui-font-size-12">司机电话</div>
                    </div>
                    {{??}}
                    <div class="aui-col-xs-3 aui-border-r" tapmode onclick="callDriver({{=it.driver_mobile}});">
                        <img src="../../image/common/34.png" class="img-icon" />
                        <div class="aui-grid-label aui-font-size-12">司机电话</div>
                    </div>
                    {{?}}
                    <div class="aui-col-xs-3 aui-border-r" tapmode onClick="openWin('chat_win')">
                        <img src="../../image/common/35.png" class="img-icon" />
                        <div class="aui-grid-label aui-font-size-12">发消息</div>
                    </div>
                    <div class="aui-col-xs-3 aui-border-r" tapmode onclick="openHelp()">
                        <img src="../../image/common/36.png" class="img-icon" />
                        <div class="aui-grid-label aui-font-size-12">联系客服</div>
                    </div>
                    <div class="aui-col-xs-3" tapmode onclick="cancelOrder();">
                        <img src="../../image/common/37.png" class="img-icon" />
                        <div class="aui-grid-label aui-font-size-12">取消订单</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="space"></div>
        <div class="aui-tab aui-border-b" id="info-tab">
            <div class="aui-tab-item aui-active">出发信息</div>
            <div class="aui-tab-item">回程信息</div>
        </div>
        <div class="aui-card-list aui-margin-b-0">
            <div class="aui-card-list-content aui-grid order-info">
                <div class="aui-row aui-padded-l-15 aui-padded-r-15">
                    <div class="aui-col-xs-6">
                        <p class="font-size-13 margin-t-6">回程机场</p>
                        <div class="aui-grid-label aui-margin-t-5 aui-padded-b-5 airport-name text-common">{{=it.data_departure_airport}}</div>
                    </div>
                    <div class="aui-col-xs-1 arrow-wrap">
                        <img src="../../image/common/30.png" class="img-arrow" />
                    </div>
                    <div class="aui-col-xs-5">
                        <p class="font-size-13 margin-t-6">目的机场</p>
                        <div class="aui-grid-label aui-margin-t-5 aui-padded-b-5 airport-name text-common">{{=it.data_airport_1}}</div>
                    </div>
                </div>
            </div>
            <div class="aui-card-list-content-padded aui-padded-t-0 aui-padded-b-0" id="chufa-wrap">
               <div class="aui-border-b" style="height: 1px;"></div>
                <ul class="aui-list aui-list-noborder">
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">出发日期</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light">{{=it.data_departure_time}}</div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">航班</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light aui-text-right">
                                <p>{{=it.data_departure_flight_name}}</p>
                                <p class="font-size-13">({{=it.data_departure_flight_info}})</p>
                            </div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">预计接车时间</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light">{{=it.data_pick_time}}</div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">联系人</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light">{{=it.data_username}}</div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">联系电话</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light">{{=it.data_usermobile}}</div>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="aui-card-list-content-padded aui-padded-t-0 aui-padded-b-0 aui-hide" id="huicheng-wrap">
                <div class="aui-border-b" style="height: 1px;"></div>
                <ul class="aui-list aui-list-noborder">
                    <li class="aui-list-item aui-border-t">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">返回日期</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light"></div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">航班</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light aui-text-right">
                                <p>{{=it.data_return_flight_name}}</p>
                                <p class="font-size-13">({{=it.data_return_flight_info?''}})</p>
                            </div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">接站时间</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light">2017-12-01 18:00:00</div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">联系人</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light">张三</div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title font-size-15">联系电话</div>
                            <div class="aui-list-item-right aui-font-size-14 text-light">18888888888</div>
                        </div>
                    </li>
                </ul>
            </div>

        </div>

        <div class="space"></div>
        <div class="aui-card-list aui-margin-b-0">
            <div class="aui-card-list-content-padded">
                <p class="text-light font-size-15">车辆信息</p>
                <p class="text-dark font-size-13">{{=it.car_number_plate || ''}} {{=it.car_color || ''}}·{{=it.car_brand || ''}}{{=it.car_model || ''}}</p>
            </div>
        </div>
    </section>
    </script>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/aui-tab.js"></script>
<script type="text/javascript" src="../../script/dot.min.js"></script>
<script type="text/javascript">
    var userid;
    var orderId;
    var postData;
    apiready = function(){
		api.parseTapmode();
        userid = $api.getStorage('userid');
        orderId = api.pageParam.id;
        loadData();
    };
    function loadData(){
        postData = {};
        postData.order_id = orderId;
        api.ajax({
            url: BASE_URL + 'App/Order/orderDetail',
            method: 'post',
            data: {
                values:postData
            }
        }, function(ret, err) {
            if (ret) {
                if(ret.code == 1){
                    var tpl = document.getElementById("doT-Template").innerHTML;
                	var tempFn = doT.template(tpl);
                	document.getElementById("doT-Html").innerHTML = tempFn(ret.data);

                    var orderTab = new auiTab({
                        element:document.getElementById("info-tab"),
                    },function(ret){
                        if(ret && ret.index){
                            switch (ret.index) {
                                case 1:
                                    document.getElementById("huicheng-wrap").classList.add("aui-hide");
                                    document.getElementById("chufa-wrap").classList.remove("aui-hide");
                                    break;
                                case 2:
                                    document.getElementById("chufa-wrap").classList.add("aui-hide");
                                    document.getElementById("huicheng-wrap").classList.remove("aui-hide");
                                    break;

                            }
                        }
                    })
                }
            }
        });
    }

    function openHelp(){
        api.openFrame({
            name: 'help_pop_frm',
            url: '../mine/help_pop_frm.html',
            rect: {
                x: 0,
                y: 0,
                w: api.winWidth,
                h: api.winHeight
            },
            pageParam: {
                name: 'value'
            },
            bounces: false
        });
    }
	function callDriver(tel){
        api.openFrame({
            name: 'tel_mask',
            url: 'tel_mask.html',
            rect: {
                x: 0,
                y: 0,
                w: api.winWidth,
                h: api.winHeight
            },
            pageParam: {
                title: '司机电话',
				msg: '确认拨打司机电话',
				tel: tel
            },
            bounces: false
        });
    }
	function cancelOrder(){
		api.confirm({
			title: '确认取消订单',
			msg: '',
			buttons: ['确定', '取消']
		}, function(ret, err) {
			var index = ret.buttonIndex;
		});
	}
</script>
</html>
