<!doctype html>
<html >
<head>
	<meta charset="UTF-8">
	<meta name="view-port" content="width=device-width,height=device-height,initial-scale=1.0,user-scalable=0">
	<title>APICloud</title>
	<link rel="stylesheet" type="text/css" href="./css/base.css" />
    <link rel="stylesheet" type="text/css" href="./css/common.css" />
</head>
<body>
    <div id="wrap">
        <div id="header">
            <h1>APICloud Module - JPush Portting</h1>
        </div>
        <div id="main">
                
        </div>
        <div id="footer">
            <h5>©2015</h5>
        </div>
    </div>
    
</body>
<script type="text/javascript" src="./script/api.js"></script>
<script type="text/javascript">

	var jpush = null;
    apiready = function(){
		jpush = api.require('ajpush');
		api.addEventListener({name:'appintent'}, function(ret,err) {
    		alert('通知被点击，收到数据：\n' + JSON.stringify(ret));//监听通知被点击后收到的数据
  		})
		api.addEventListener({name:'pause'}, function(ret,err) {
    		onPause();//监听应用进入后台，通知jpush暂停事件
  		})
  			
  		api.addEventListener({name:'resume'}, function(ret,err) {
    		onResume();//监听应用恢复到前台，通知jpush恢复事件
  		})
        var header = $api.byId('header');
        var bodyHeight = window.innerHeight;
        var offset = $api.offset(header);
        var footer = $api.byId('footer');
        var fPos = $api.offset(footer);
        api.openFrame({
            name: 'main-con',
            url: './html/main-con.html',
            bounces: true,
            rect: {
                x: offset.l,
                y: offset.t + offset.h,
                w: offset.w,
                h: bodyHeight - offset.h - fPos.h
            }
        });
       
    }

	//统计-app恢复
	function onResume(){
		jpush.onResume();
		console.log('JPush onResume');
	}
	
	//统计-app暂停
	function onPause(){
		jpush.onPause();
		console.log('JPush onPause');
	}
</script>
</html>